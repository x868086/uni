(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2693acaf"],{"08dc":function(e,t,r){"use strict";var n=r("be4f"),a=r.n(n);a.a},"5af5":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-input",{staticClass:"serial-search",attrs:{placeholder:"请输入待销售号码",size:"large","suffix-icon":"el-icon-search"},on:{blur:e.serialSearch},model:{value:e.inputSerial,callback:function(t){e.inputSerial=t},expression:"inputSerial"}}),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":"",height:"550"}},[r("el-table-column",{attrs:{align:"center",label:"ID",prop:"id","min-width":"60",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.id))])]}}])}),r("el-table-column",{attrs:{"min-width":"110px",align:"center",prop:"serial_number",label:"号码",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.serial_number))])]}}])}),r("el-table-column",{attrs:{"min-width":"100px",align:"center",prop:"product_name",label:"套餐名称",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.product_name))])]}}])}),r("el-table-column",{attrs:{"min-width":"120px",align:"center",label:"营服名称",prop:"id_desc"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.id_desc))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"月租","min-width":"90",prop:"fee",sortable:!0,"sort-method":e.sortByFee},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.fee))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"联系电话","min-width":"110",prop:"contact_phone"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.contact_phone))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"发展人","min-width":"90",prop:"dev_name"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.dev_name))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"发展人手机号","min-width":"110",prop:"dev_phone"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.dev_phone))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"操作时间","min-width":"150",prop:"operate_time",sortable:!0,"sort-method":e.sortByOperateTime},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.operate_time))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"状态","min-width":"90",prop:"operate",sortable:!0,"sort-method":e.sortByOperateAction},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.operate))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.edit?r("el-button",{attrs:{type:"primary",disabled:["待处理","已处理","删除"].includes(n.operate),size:"mini",icon:"el-icon-circle-check-outline"},nativeOn:{click:function(t){return e.serialModify(n.serial_number)}}},[e._v("提交信息")]):e._e()]}}])})],1),r("el-dialog",{attrs:{title:"二次销售信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.form,"status-icon":"",rules:e.rules}},[r("el-form-item",{attrs:{label:"二次销售号码","label-width":e.formLabelWidth,prop:"serial"}},[r("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.serial,callback:function(t){e.$set(e.form,"serial",t)},expression:"form.serial"}})],1),r("el-form-item",{attrs:{label:"发展人","label-width":e.formLabelWidth,prop:"devName"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.devName,callback:function(t){e.$set(e.form,"devName",t)},expression:"form.devName"}})],1),r("el-form-item",{attrs:{label:"发展人手机号","label-width":e.formLabelWidth,prop:"devPhone"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.devPhone,callback:function(t){e.$set(e.form,"devPhone",t)},expression:"form.devPhone"}})],1),r("el-form-item",{attrs:{label:"用户联系电话","label-width":e.formLabelWidth,prop:"contactPhone"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.contactPhone,callback:function(t){e.$set(e.form,"contactPhone",t)},expression:"form.contactPhone"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1),r("el-pagination",{staticClass:"serial-pagination",attrs:{layout:"prev, pager, next",background:"","page-size":e.listQuery.limit,total:e.listLength},on:{"prev-click":e.getPrevPage,"next-click":e.getNextPage,"current-change":e.getCurrentPage}})],1)},a=[],i=(r("c740"),r("d81d"),r("a434"),r("96cf"),r("1da1")),o=r("e2ba"),l=r("61f7"),s={name:"SerialModify",filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]}},data:function(){var e=function(e,t,r){""===t?r(new Error("请输入发展人名称")):Object(l["a"])(t)||r(new Error("发展人名称最少2个字符且包含中文")),r()},t=function(e,t,r){""===t?r(new Error("请输入手机号码")):(Object(l["c"])(t)||r(new Error("请输入正确的手机号码")),r())},r=function(e,t,r){""===t?r(new Error("请输入联系方式")):(Object(l["c"])(t)||r(new Error("请输入正确的用户联系方式")),r())};return{list:null,listLoading:!0,listQuery:{offset:0,limit:10},inputSerial:null,listLength:0,currentPage:0,dialogFormVisible:!1,formLabelWidth:"120px",form:{serial:"",devName:"",devPhone:"",contactPhone:""},rules:{devName:[{required:!0,message:"请输入发展人名称",trigger:"blur"},{validator:e,trigger:"blur"}],devPhone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{validator:t,trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系方式",trigger:"blur"},{validator:r,trigger:"blur"}]}}},created:function(){this.getList(this.listQuery.offset,this.listQuery.limit)},methods:{getList:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,i,l,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.listLoading=!0,n.next=3,Object(o["b"])({offset:e,limit:t});case 3:a=n.sent,i=a.result,l=void 0===i?null:i,s=a.total,c=void 0===s?void 0:s,r.listLength=c,u=l,r.list=u.map((function(e,t){return r.$set(e,"edit",e.operate),r.$set(e,"id",t),e})),r.listLoading=!1;case 12:case"end":return n.stop()}}),n)})))()},submitForm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r,n){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=16;break}return e.prev=1,a="待处理",i=(new Date).getTime(),e.next=6,Object(o["c"])(t.form.serial,{devName:t.form.devName,devPhone:t.form.devPhone,contactPhone:t.form.contactPhone,operate:a,operateTime:i});case 6:return e.next=8,t.getList(t.currentPage*parseInt(t.listQuery.limit),t.listQuery.limit);case 8:t.dialogFormVisible=!1,e.next=14;break;case 11:throw e.prev=11,e.t0=e["catch"](1),e.t0;case 14:e.next=17;break;case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,r){return e.apply(this,arguments)}}())},resetForm:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},serialModify:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.form=Object.assign({},{serial:"",devName:"",devPhone:"",contactPhone:""}),t.dialogFormVisible=!0,t.form.serial=e;case 3:case"end":return r.stop()}}),r)})))()},serialSearch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,l,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.inputSerial&&11===e.inputSerial.length){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,Object(o["b"])({offset:0,limit:1e4});case 4:if(r=t.sent,n=r.result,a=void 0===n?null:n,i=a.findIndex((function(t){return t.serial_number===e.inputSerial})),-1!==i){t.next=11;break}return e.$message({message:"未查询到待销售号码信息",type:"warning"}),t.abrupt("return",!1);case 11:return l=i/e.listQuery.limit,t.next=14,e.getCurrentPage(l+1);case 14:return s=e.list.findIndex((function(t){return t.serial_number===e.inputSerial})),t.abrupt("return",e.list.splice(0,0,e.list.splice(s,1)[0]));case 16:case"end":return t.stop()}}),t)})))()},getPrevPage:function(e){},getNextPage:function(e){},getCurrentPage:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.getList(parseInt(e-1)*parseInt(t.listQuery.limit),t.listQuery.limit);case 2:t.currentPage=parseInt(e-1);case 3:case"end":return r.stop()}}),r)})))()},sortByOperateTime:function(e,t){return e.operate_time-t.operate_time},sortByOperateAction:function(e,t){return e.operate-t.operate},sortByFee:function(e,t){return e.fee-t.fee}}},c=s,u=(r("08dc"),r("2877")),f=Object(u["a"])(c,n,a,!1,null,"0cceecc4",null);t["default"]=f.exports},a434:function(e,t,r){"use strict";var n=r("23e7"),a=r("23cb"),i=r("a691"),o=r("50c4"),l=r("7b0b"),s=r("65f0"),c=r("8418"),u=r("1dde"),f=r("ae40"),d=u("splice"),m=f("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,b=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!m},{splice:function(e,t){var r,n,u,f,d,m,g=l(this),w=o(g.length),_=a(e,w),x=arguments.length;if(0===x?r=n=0:1===x?(r=0,n=w-_):(r=x-2,n=b(p(i(t),0),w-_)),w+r-n>h)throw TypeError(v);for(u=s(g,n),f=0;f<n;f++)d=_+f,d in g&&c(u,f,g[d]);if(u.length=n,r<n){for(f=_;f<w-n;f++)d=f+n,m=f+r,d in g?g[m]=g[d]:delete g[m];for(f=w;f>w-n+r;f--)delete g[f-1]}else if(r>n)for(f=w-n;f>_;f--)d=f+n-1,m=f+r-1,d in g?g[m]=g[d]:delete g[m];for(f=0;f<r;f++)g[f+_]=arguments[f+2];return g.length=w-n+r,u}})},be4f:function(e,t,r){},c740:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").findIndex,i=r("44d2"),o=r("ae40"),l="findIndex",s=!0,c=o(l);l in[]&&Array(1)[l]((function(){s=!1})),n({target:"Array",proto:!0,forced:s||!c},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(l)},e2ba:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return l})),r.d(t,"c",(function(){return s}));var n=r("b775");function a(e){var t=e.offset,r=void 0===t?0:t,a=e.limit,i=void 0===a?5:a;return Object(n["a"])({url:"/b2iserial/list",method:"get",params:{offset:r,limit:i}})}function i(e,t){return Object(n["a"])({url:"/b2iserial/".concat(e,"/allocate"),method:"post",data:t})}function o(e,t){return Object(n["a"])({url:"/b2iserial/".concat(e,"/reject"),method:"post",data:t})}function l(e,t){return Object(n["a"])({url:"/b2iserial/".concat(e,"/remove"),method:"post",data:t})}function s(e,t){return Object(n["a"])({url:"/b2iserial/".concat(e,"/modify"),method:"post",data:t})}}}]);