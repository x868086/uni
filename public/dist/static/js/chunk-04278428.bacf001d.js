(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04278428"],{"1bf2":function(e,t,r){var n=r("23e7"),a=r("56ef");n({target:"Reflect",stat:!0},{ownKeys:a})},"4d0b":function(e,t,r){"use strict";var n=r("7b1d"),a=r.n(n);a.a},"510e":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-button",{staticClass:"export-button",attrs:{type:"primary",icon:"el-icon-document",size:"medium"},nativeOn:{click:function(t){return e.exportFile(t)}}},[e._v("导出CSV文件")]),r("el-input",{staticClass:"serial-search",attrs:{placeholder:"请输入待销售号码",size:"large","suffix-icon":"el-icon-search"},on:{blur:e.serialSearch},model:{value:e.inputSerial,callback:function(t){e.inputSerial=t},expression:"inputSerial"}}),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":"",height:"550"}},[r("el-table-column",{attrs:{align:"center",label:"ID",prop:"id","min-width":"60",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.id))])]}}])}),r("el-table-column",{attrs:{"min-width":"110px",align:"center",prop:"serial_number",label:"号码",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.serial_number))])]}}])}),r("el-table-column",{attrs:{"min-width":"100px",align:"center",prop:"product_name",label:"套餐名称",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.product_name))])]}}])}),r("el-table-column",{attrs:{"min-width":"120px",align:"center",label:"营服名称",prop:"id_desc"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.id_desc))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"月租","min-width":"90",prop:"fee",sortable:!0,"sort-method":e.sortByFee},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.fee))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"联系电话","min-width":"110",prop:"contact_phone"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.contact_phone))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"发展人","min-width":"90",prop:"dev_name"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.dev_name))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"发展人手机号","min-width":"110",prop:"dev_phone"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.dev_phone))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"操作时间","min-width":"150",prop:"operate_time",sortable:!0,"sort-method":e.sortByOperateTime},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.operate_time))])]}}])}),r("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"状态","min-width":"90",prop:"operate",sortable:!0,"sort-method":e.sortByOperateAction},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",[e._v(e._s(n.operate))])]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.edit?r("el-button",{attrs:{type:"success",disabled:["待提交","已处理","驳回","删除"].includes(n.operate),size:"mini",icon:"el-icon-circle-check-outline"},on:{click:function(t){return e.serialAllocate(n.serial_number)}}},[e._v("释放")]):e._e(),n.edit?r("el-button",{attrs:{type:"warning",disabled:["待提交","已处理","驳回","删除"].includes(n.operate),size:"mini",icon:"el-icon-circle-check-outline"},on:{click:function(t){return e.serialReject(n.serial_number)}}},[e._v("驳回")]):e._e(),n.edit?r("el-button",{attrs:{type:"danger",disabled:["已处理","删除"].includes(n.operate),size:"mini",icon:"el-icon-circle-check-outline"},on:{click:function(t){return e.serialRemove(n.serial_number)}}},[e._v("删除")]):e._e()]}}])})],1),r("el-pagination",{staticClass:"serial-pagination",attrs:{layout:"prev, pager, next",background:"","page-size":e.listQuery.limit,total:e.listLength},on:{"prev-click":e.getPrevPage,"next-click":e.getNextPage,"current-change":e.getCurrentPage}})],1)},a=[],i=(r("c740"),r("d81d"),r("a434"),r("96cf"),r("1da1")),o=r("e2ba"),s=(r("99af"),r("a15b"),r("1bf2"),r("ac1f"),r("5319"),r("bf19"),r("323e")),c=r.n(s);function u(e){c.a.start();var t="data:text/csv;charset=utf-8,\ufeff",r=Reflect.ownKeys(e[0]),n=r.join(",")+"\n",a=n;e.map((function(e){var t="";r.map((function(r){t+="".concat(e[r],",")})),a+=t+"\n"})),a=encodeURIComponent(a),t+=a;var i="".concat((new Date).toJSON().substr(0,10).replace(/-/g,"")).concat(parseInt(1e4*Math.random()),".csv"),o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download",i),document.body.appendChild(o),o.click(),c.a.done()}var l={name:"SerialReset",filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]}},data:function(){return{list:null,listLoading:!0,listQuery:{offset:0,limit:10},inputSerial:null,listLength:0,currentPage:0}},created:function(){this.getList(this.listQuery.offset,this.listQuery.limit)},methods:{getList:function(e,t){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,i,s,c,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.listLoading=!0,n.next=3,Object(o["b"])({offset:e,limit:t});case 3:a=n.sent,i=a.result,s=void 0===i?null:i,c=a.total,u=void 0===c?void 0:c,r.listLength=u,l=s,r.list=l.map((function(e,t){return r.$set(e,"edit",e.operate),r.$set(e,"id",t),e})),r.listLoading=!1;case 12:case"end":return n.stop()}}),n)})))()},serialAllocate:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="已处理",a=(new Date).getTime(),r.prev=2,r.next=5,Object(o["a"])(e,{operate:n,operateTime:a});case 5:return r.next=7,t.getList(t.currentPage*parseInt(t.listQuery.limit),t.listQuery.limit);case 7:r.next=12;break;case 9:return r.prev=9,r.t0=r["catch"](2),r.abrupt("return",!1);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},serialReject:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="驳回",a=(new Date).getTime(),r.prev=2,r.next=5,Object(o["d"])(e,{operate:n,operateTime:a});case 5:return r.next=7,t.getList(t.currentPage*parseInt(t.listQuery.limit),t.listQuery.limit);case 7:r.next=12;break;case 9:return r.prev=9,r.t0=r["catch"](2),r.abrupt("return",!1);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},serialRemove:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n="删除",a=(new Date).getTime(),r.prev=2,r.next=5,Object(o["e"])(e,{operate:n,operateTime:a});case 5:return r.next=7,t.getList(t.currentPage*parseInt(t.listQuery.limit),t.listQuery.limit);case 7:r.next=12;break;case 9:return r.prev=9,r.t0=r["catch"](2),r.abrupt("return",!1);case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},serialSearch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.inputSerial&&11===e.inputSerial.length){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,Object(o["b"])({offset:0,limit:1e4});case 4:if(r=t.sent,n=r.result,a=void 0===n?null:n,i=a.findIndex((function(t){return t.serial_number===e.inputSerial})),-1!==i){t.next=11;break}return e.$message({message:"未查询到待销售号码信息",type:"warning"}),t.abrupt("return",!1);case 11:return s=i/e.listQuery.limit,t.next=14,e.getCurrentPage(s+1);case 14:return c=e.list.findIndex((function(t){return t.serial_number===e.inputSerial})),t.abrupt("return",e.list.splice(0,0,e.list.splice(c,1)[0]));case 16:case"end":return t.stop()}}),t)})))()},getPrevPage:function(e){},getNextPage:function(e){},getCurrentPage:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.getList(parseInt(e-1)*parseInt(t.listQuery.limit),t.listQuery.limit);case 2:t.currentPage=parseInt(e-1);case 3:case"end":return r.stop()}}),r)})))()},sortByOperateTime:function(e,t){return e.operate_time-t.operate_time},sortByOperateAction:function(e,t){return e.operate-t.operate},sortByFee:function(e,t){return e.fee-t.fee},exportFile:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["b"])({offset:0,limit:1e4});case 2:t=e.sent,r=t.result,n=void 0===r?null:r,u(n);case 6:case"end":return e.stop()}}),e)})))()}}},p=l,d=(r("4d0b"),r("2877")),f=Object(d["a"])(p,n,a,!1,null,"180940da",null);t["default"]=f.exports},"7b1d":function(e,t,r){},a15b:function(e,t,r){"use strict";var n=r("23e7"),a=r("44ad"),i=r("fc6a"),o=r("a640"),s=[].join,c=a!=Object,u=o("join",",");n({target:"Array",proto:!0,forced:c||!u},{join:function(e){return s.call(i(this),void 0===e?",":e)}})},a434:function(e,t,r){"use strict";var n=r("23e7"),a=r("23cb"),i=r("a691"),o=r("50c4"),s=r("7b0b"),c=r("65f0"),u=r("8418"),l=r("1dde"),p=r("ae40"),d=l("splice"),f=p("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,b=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!f},{splice:function(e,t){var r,n,l,p,d,f,h=s(this),w=o(h.length),_=a(e,w),x=arguments.length;if(0===x?r=n=0:1===x?(r=0,n=w-_):(r=x-2,n=b(m(i(t),0),w-_)),w+r-n>g)throw TypeError(v);for(l=c(h,n),p=0;p<n;p++)d=_+p,d in h&&u(l,p,h[d]);if(l.length=n,r<n){for(p=_;p<w-n;p++)d=p+n,f=p+r,d in h?h[f]=h[d]:delete h[f];for(p=w;p>w-n+r;p--)delete h[p-1]}else if(r>n)for(p=w-n;p>_;p--)d=p+n-1,f=p+r-1,d in h?h[f]=h[d]:delete h[f];for(p=0;p<r;p++)h[p+_]=arguments[p+2];return h.length=w-n+r,l}})},bf19:function(e,t,r){"use strict";var n=r("23e7");n({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},c740:function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").findIndex,i=r("44d2"),o=r("ae40"),s="findIndex",c=!0,u=o(s);s in[]&&Array(1)[s]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!u},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},e2ba:function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return s})),r.d(t,"c",(function(){return c}));var n=r("b775");function a(e){var t=e.offset,r=void 0===t?0:t,a=e.limit,i=void 0===a?5:a;return Object(n["a"])({url:"/b2iserial/list",method:"get",params:{offset:r,limit:i}})}function i(e,t){return Object(n["a"])({url:"/b2iserial/".concat(e,"/allocate"),method:"post",data:t})}function o(e,t){return Object(n["a"])({url:"/b2iserial/".concat(e,"/reject"),method:"post",data:t})}function s(e,t){return Object(n["a"])({url:"/b2iserial/".concat(e,"/remove"),method:"post",data:t})}function c(e,t){return Object(n["a"])({url:"/b2iserial/".concat(e,"/modify"),method:"post",data:t})}}}]);