(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3115becd"],{"1bf2":function(e,t,n){var r=n("23e7"),a=n("56ef");r({target:"Reflect",stat:!0},{ownKeys:a})},"4d0b":function(e,t,n){"use strict";var r=n("7b1d"),a=n.n(r);a.a},"510e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-button",{staticClass:"export-button",attrs:{type:"primary",icon:"el-icon-document",size:"medium"},nativeOn:{click:function(t){return e.exportFile(t)}}},[e._v("导出CSV文件")]),n("el-input",{staticClass:"serial-search",attrs:{placeholder:"请输入待销售号码",size:"large","suffix-icon":"el-icon-search"},on:{blur:e.serialSearch},model:{value:e.inputSerial,callback:function(t){e.inputSerial=t},expression:"inputSerial"}}),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":"",height:"550"}},[n("el-table-column",{attrs:{align:"center",label:"ID",prop:"id","min-width":"60",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.id))])]}}])}),n("el-table-column",{attrs:{"min-width":"110px",align:"center",prop:"serial_number",label:"号码",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.serial_number))])]}}])}),n("el-table-column",{attrs:{"min-width":"100px",align:"center",prop:"product_name",label:"套餐名称",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.product_name))])]}}])}),n("el-table-column",{attrs:{"min-width":"120px",align:"center",label:"营服名称",prop:"id_desc"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.id_desc))])]}}])}),n("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"月租","min-width":"90",prop:"fee",sortable:!0,"sort-method":e.sortByFee},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.fee))])]}}])}),n("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"联系电话","min-width":"110",prop:"contact_phone"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.contact_phone))])]}}])}),n("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"发展人","min-width":"90",prop:"dev_name"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.dev_name))])]}}])}),n("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"发展人手机号","min-width":"110",prop:"dev_phone"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.dev_phone))])]}}])}),n("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"操作时间","min-width":"150",prop:"operate_time",sortable:!0,"sort-method":e.sortByOperateTime},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.operate_time))])]}}])}),n("el-table-column",{attrs:{"class-name":"status-col",align:"center",label:"状态","min-width":"90",prop:"operate",sortable:!0,"sort-method":e.sortByOperateAction},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.operate))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[r.edit?n("el-button",{attrs:{type:"success",disabled:["待提交","已处理","驳回","删除"].includes(r.operate),size:"mini",icon:"el-icon-circle-check-outline"},on:{click:function(t){return e.serialAllocate(r.serial_number)}}},[e._v("释放")]):e._e(),r.edit?n("el-button",{attrs:{type:"warning",disabled:["待提交","已处理","驳回","删除"].includes(r.operate),size:"mini",icon:"el-icon-circle-check-outline"},on:{click:function(t){return e.serialReject(r.serial_number)}}},[e._v("驳回")]):e._e(),r.edit?n("el-button",{attrs:{type:"danger",disabled:["已处理","删除"].includes(r.operate),size:"mini",icon:"el-icon-circle-check-outline"},on:{click:function(t){return e.serialRemove(r.serial_number)}}},[e._v("删除")]):e._e()]}}])})],1),n("el-pagination",{staticClass:"serial-pagination",attrs:{layout:"prev, pager, next",background:"","page-size":e.listQuery.limit,total:e.listLength},on:{"prev-click":e.getPrevPage,"next-click":e.getNextPage,"current-change":e.getCurrentPage}})],1)},a=[],i=(n("c740"),n("d81d"),n("a434"),n("96cf"),n("1da1")),c=n("e2ba"),o=n("8c01"),s={name:"SerialReset",filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]}},data:function(){return{list:null,listLoading:!0,listQuery:{offset:0,limit:10},inputSerial:null,listLength:0,currentPage:0}},created:function(){this.getList(this.listQuery.offset,this.listQuery.limit)},methods:{getList:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,i,o,s,u,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.listLoading=!0,r.next=3,Object(c["b"])({offset:e,limit:t});case 3:a=r.sent,i=a.result,o=void 0===i?null:i,s=a.total,u=void 0===s?void 0:s,n.listLength=u,l=o,n.list=l.map((function(e,t){return n.$set(e,"edit",e.operate),n.$set(e,"id",t),e})),n.listLoading=!1;case 12:case"end":return r.stop()}}),r)})))()},serialAllocate:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r="已处理",a=(new Date).getTime(),n.prev=2,n.next=5,Object(c["a"])(e,{operate:r,operateTime:a});case 5:return n.next=7,t.getList(t.currentPage*parseInt(t.listQuery.limit),t.listQuery.limit);case 7:n.next=12;break;case 9:return n.prev=9,n.t0=n["catch"](2),n.abrupt("return",!1);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))()},serialReject:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r="驳回",a=(new Date).getTime(),n.prev=2,n.next=5,Object(c["d"])(e,{operate:r,operateTime:a});case 5:return n.next=7,t.getList(t.currentPage*parseInt(t.listQuery.limit),t.listQuery.limit);case 7:n.next=12;break;case 9:return n.prev=9,n.t0=n["catch"](2),n.abrupt("return",!1);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))()},serialRemove:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r="删除",a=(new Date).getTime(),n.prev=2,n.next=5,Object(c["e"])(e,{operate:r,operateTime:a});case 5:return n.next=7,t.getList(t.currentPage*parseInt(t.listQuery.limit),t.listQuery.limit);case 7:n.next=12;break;case 9:return n.prev=9,n.t0=n["catch"](2),n.abrupt("return",!1);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))()},serialSearch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.inputSerial&&11===e.inputSerial.length){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,Object(c["b"])({offset:0,limit:1e4});case 4:if(n=t.sent,r=n.result,a=void 0===r?null:r,i=a.findIndex((function(t){return t.serial_number===e.inputSerial})),-1!==i){t.next=11;break}return e.$message({message:"未查询到待销售号码信息",type:"warning"}),t.abrupt("return",!1);case 11:return o=i/e.listQuery.limit,t.next=14,e.getCurrentPage(o+1);case 14:return s=e.list.findIndex((function(t){return t.serial_number===e.inputSerial})),t.abrupt("return",e.list.splice(0,0,e.list.splice(s,1)[0]));case 16:case"end":return t.stop()}}),t)})))()},getPrevPage:function(e){},getNextPage:function(e){},getCurrentPage:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getList(parseInt(e-1)*parseInt(t.listQuery.limit),t.listQuery.limit);case 2:t.currentPage=parseInt(e-1);case 3:case"end":return n.stop()}}),n)})))()},sortByOperateTime:function(e,t){return e.operate_time-t.operate_time},sortByOperateAction:function(e,t){return e.operate-t.operate},sortByFee:function(e,t){return e.fee-t.fee},exportFile:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["b"])({offset:0,limit:1e4});case 2:t=e.sent,n=t.result,r=void 0===n?null:n,Object(o["a"])(r);case 6:case"end":return e.stop()}}),e)})))()}}},u=s,l=(n("4d0b"),n("2877")),d=Object(l["a"])(u,r,a,!1,null,"180940da",null);t["default"]=d.exports},"7b1d":function(e,t,n){},"8c01":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("99af"),n("a15b"),n("d81d"),n("1bf2"),n("ac1f"),n("5319"),n("bf19");var r=n("323e"),a=n.n(r);function i(e){a.a.start();var t="data:text/csv;charset=utf-8,\ufeff",n=Reflect.ownKeys(e[0]),r=n.join(",")+"\n",i=r;e.map((function(e){var t="";n.map((function(n){t+="".concat(e[n],",")})),i+=t+"\n"})),i=encodeURIComponent(i),t+=i;var c="".concat((new Date).toJSON().substr(0,10).replace(/-/g,"")).concat(parseInt(1e4*Math.random()),".csv"),o=document.createElement("a");o.setAttribute("href",t),o.setAttribute("download",c),document.body.appendChild(o),o.click(),a.a.done()}},a15b:function(e,t,n){"use strict";var r=n("23e7"),a=n("44ad"),i=n("fc6a"),c=n("a640"),o=[].join,s=a!=Object,u=c("join",",");r({target:"Array",proto:!0,forced:s||!u},{join:function(e){return o.call(i(this),void 0===e?",":e)}})},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),c=n("50c4"),o=n("7b0b"),s=n("65f0"),u=n("8418"),l=n("1dde"),d=n("ae40"),p=l("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,b=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var n,r,l,d,p,f,h=o(this),w=c(h.length),_=a(e,w),x=arguments.length;if(0===x?n=r=0:1===x?(n=0,r=w-_):(n=x-2,r=b(m(i(t),0),w-_)),w+n-r>g)throw TypeError(v);for(l=s(h,r),d=0;d<r;d++)p=_+d,p in h&&u(l,d,h[p]);if(l.length=r,n<r){for(d=_;d<w-r;d++)p=d+r,f=d+n,p in h?h[f]=h[p]:delete h[f];for(d=w;d>w-r+n;d--)delete h[d-1]}else if(n>r)for(d=w-r;d>_;d--)p=d+r-1,f=d+n-1,p in h?h[f]=h[p]:delete h[f];for(d=0;d<n;d++)h[d+_]=arguments[d+2];return h.length=w-r+n,l}})},bf19:function(e,t,n){"use strict";var r=n("23e7");r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,i=n("44d2"),c=n("ae40"),o="findIndex",s=!0,u=c(o);o in[]&&Array(1)[o]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!u},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)},e2ba:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return s}));var r=n("b775");function a(e){var t=e.offset,n=void 0===t?0:t,a=e.limit,i=void 0===a?5:a;return Object(r["a"])({url:"/b2iserial/list",method:"get",params:{offset:n,limit:i}})}function i(e,t){return Object(r["a"])({url:"/b2iserial/".concat(e,"/allocate"),method:"post",data:t})}function c(e,t){return Object(r["a"])({url:"/b2iserial/".concat(e,"/reject"),method:"post",data:t})}function o(e,t){return Object(r["a"])({url:"/b2iserial/".concat(e,"/remove"),method:"post",data:t})}function s(e,t){return Object(r["a"])({url:"/b2iserial/".concat(e,"/modify"),method:"post",data:t})}}}]);