(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e970e5be"],{"1bf2":function(e,t,n){var r=n("23e7"),a=n("56ef");r({target:"Reflect",stat:!0},{ownKeys:a})},"7fde":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("section",{staticClass:"condtion-container"},[n("el-button",{staticClass:"export-button",attrs:{type:"primary",icon:"el-icon-document",size:"medium"},nativeOn:{click:function(t){return e.exportFile(t)}}},[e._v("导出CSV文件")]),n("el-date-picker",{attrs:{type:"month",placeholder:"选择月",format:"yyyyMM","value-format":"yyyyMM",clearable:!1},on:{change:function(t){return e.searchByMonth()}},model:{value:e.currentMonth,callback:function(t){e.currentMonth=t},expression:"currentMonth"}}),n("el-select",{attrs:{clearable:"",placeholder:"稽核项目筛选"},on:{clear:function(t){return e.getList(e.listQuery.offset,e.listQuery.limit,e.currentMonth)},change:function(t){return e.searchByAuditType()}},model:{value:e.auditTypeValue,callback:function(t){e.auditTypeValue=t},expression:"auditTypeValue"}},e._l(e.auditTypeOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("el-input",{staticClass:"serial-search",attrs:{placeholder:"服务号码查询",size:"large","suffix-icon":"el-icon-search"},on:{blur:e.serialSearch},model:{value:e.inputSerial,callback:function(t){e.inputSerial=t},expression:"inputSerial"}})],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"table-container",staticStyle:{width:"100%"},attrs:{data:e.ownerList,border:"",fit:"",height:"550",stripe:"","row-style":e.rowStyle}},[n("el-table-column",{attrs:{align:"center",label:"ID",prop:"id","min-width":"60",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.id))])]}}])}),n("el-table-column",{attrs:{"min-width":"90px",align:"center",prop:"audit_type",label:"稽核项目",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.audit_type))])]}}])}),n("el-table-column",{attrs:{"min-width":"90px",align:"center",prop:"audit_date",label:"稽核日期",fixed:"",sortable:!0,"sort-method":e.sortByAuditDate},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.audit_date))])]}}])}),n("el-table-column",{attrs:{"min-width":"70px",align:"center",label:"差错金额",prop:"fee",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.fee))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"服务号码","min-width":"160",prop:"serial_number",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.serial_number))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"网别","min-width":"120",prop:"net_type_name"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.net_type_name))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"产品名称","min-width":"90",prop:"product_name"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.product_name))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"是否整改","min-width":"70",prop:"state_name"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-tag",{attrs:{size:"mini",type:"已整改"===r.state_name?"success":"danger"}},[n("span",[e._v(e._s(r.state_name))])])]}}])}),n("el-table-column",{attrs:{align:"center",label:"考核金额","min-width":"90",prop:"fine_fee",sortable:!0,"sort-method":e.sortByFineFee},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.fine_fee))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"稽核员","min-width":"70",prop:"audit_staffname"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("span",[e._v(e._s(r.audit_staffname))])]}}])}),n("el-table-column",{attrs:{align:"center",label:"详情","min-width":"100",prop:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[n("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(t){return e.getItem(r)}}},[e._v("详情")])]}}])})],1),n("el-dialog",{attrs:{title:"稽核结果详情",visible:e.dialogVisible,width:"65%","before-close":e.dialogClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"item-cotainer"},[n("div",{staticClass:"items"},[n("h4",[e._v("稽核项目:")]),n("p",[e._v(e._s(e.currentItem.audit_type))])]),n("div",{staticClass:"items"},[n("h4",[e._v("稽核日期:")]),n("p",[e._v(e._s(e.currentItem.audit_date))])]),n("div",{staticClass:"items"},[n("h4",[e._v("差错原因:")]),n("p",[e._v(e._s(e.currentItem.non_conformance))])]),n("div",{staticClass:"items"},[n("h4",[e._v("差错金额:")]),n("el-tag",{staticClass:"current-state",attrs:{size:"mini",type:"danger"}},[n("span",[e._v(e._s(e.currentItem.fee))])])],1),n("div",{staticClass:"items"},[n("h4",[e._v("服务号码:")]),n("p",[e._v(e._s(e.currentItem.serial_number))])]),n("div",{staticClass:"items"},[n("h4",[e._v("网别:")]),n("p",[e._v(e._s(e.currentItem.net_type_name))])]),n("div",{staticClass:"items"},[n("h4",[e._v("业务名称:")]),n("p",[e._v(e._s(e.currentItem.subjects_name))])]),n("div",{staticClass:"items"},[n("h4",[e._v("产品名称:")]),n("p",[e._v(e._s(e.currentItem.product_name))])]),n("div",{staticClass:"items"},[n("h4",[e._v("受理/发展渠道、发展人(政企):")]),n("p",[e._v(e._s(e.currentItem.access_departname))])]),n("div",{staticClass:"items"},[n("h4",[e._v("渠道编码:")]),n("p",[e._v(e._s(e.currentItem.access_departid))])]),n("div",{staticClass:"items"},[n("h4",[e._v("集中系统编码:")]),n("p",[e._v(e._s(e.currentItem.cuc_depart_code))])]),n("div",{staticClass:"items"},[n("h4",[e._v("受理工号:")]),n("p",[e._v(e._s(e.currentItem.access_staffid))])]),n("div",{staticClass:"items"},[n("h4",[e._v("受理时间:")]),n("p",[e._v(e._s(e.currentItem.access_date))])]),n("div",{staticClass:"items"},[n("h4",[e._v("归属营服:")]),n("p",[e._v(e._s(e.currentItem.id_desc))])]),n("div",{staticClass:"items"},[n("h4",[e._v("复核详情:")]),n("p",[e._v(e._s(e.currentItem.check_desc))])]),n("div",{staticClass:"items"},[n("h4",[e._v("考核金额:")]),n("el-tag",{staticClass:"current-state",attrs:{size:"mini",type:"danger"}},[n("span",[e._v(e._s(e.currentItem.fine_fee))])])],1),n("div",{staticClass:"items"},[n("h4",[e._v("稽核员姓名:")]),n("p",[e._v(e._s(e.currentItem.audit_staffname))])]),n("div",{staticClass:"items"},[n("h4",[e._v("备注:")]),n("p",[e._v(e._s(e.currentItem.remark_desc))])]),n("div",{staticClass:"items"},[n("h4",[e._v("是否整改:")]),n("el-radio",{attrs:{label:"待整改"},model:{value:e.currentItem.state_name,callback:function(t){e.$set(e.currentItem,"state_name",t)},expression:"currentItem.state_name"}},[e._v("待整改")]),n("el-radio",{attrs:{label:"已整改"},model:{value:e.currentItem.state_name,callback:function(t){e.$set(e.currentItem,"state_name",t)},expression:"currentItem.state_name"}},[e._v("已整改")]),n("el-radio",{attrs:{label:"无需整改"},model:{value:e.currentItem.state_name,callback:function(t){e.$set(e.currentItem,"state_name",t)},expression:"currentItem.state_name"}},[e._v("无需整改")])],1),n("div",{staticClass:"items reject"},[n("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.currentItem}},[n("el-form-item",{attrs:{label:e.resonDesc,prop:"reject_reason"}},[n("el-input",{staticClass:"reject-desc",attrs:{type:"textarea"},model:{value:e.currentItem.reject_reason,callback:function(t){e.$set(e.currentItem,"reject_reason",t)},expression:"currentItem.reject_reason"}})],1)],1)],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)]),n("el-pagination",{staticClass:"serial-pagination",attrs:{layout:"prev, pager, next",background:"","page-size":e.listQuery.limit,total:e.listLength},on:{"prev-click":e.getPrevPage,"next-click":e.getNextPage,"current-change":e.getCurrentPage}})],1)},a=[],i=(n("99af"),n("4de4"),n("c740"),n("4160"),n("caad"),n("a434"),n("2532"),n("159b"),n("96cf"),n("1da1")),s=n("5530"),c=n("b775"),u=function(){var e=(new Date).getFullYear(),t=(new Date).getMonth()+1;return t<10?"".concat(e,"0").concat(t):"".concat(e).concat(t)};function o(e){var t=e.offset,n=void 0===t?0:t,r=e.limit,a=void 0===r?20:r,i=e.auditdate,s=void 0===i?u():i,o=e.audittype;return Object(c["a"])({url:"/audit/list",method:"get",params:{offset:n,limit:a,auditdate:s,audittype:o}})}function l(e){return Object(c["a"])({url:"/audit/modify",method:"post",data:e})}function d(){return Object(c["a"])({url:"/audit/audittype",method:"get"})}var f=n("8c01"),m=n("2f62"),p={name:"AuditList",data:function(){return{listQuery:{offset:0,limit:50},currentMonth:"",currentItem:{},listLength:0,list:[],listLoading:!0,inputSerial:null,dialogVisible:!1,rules:{reject_reason:[{min:3,max:120,message:"长度在3到120个字符,超过120字请提交正式情况说明",trigger:"blur"},{required:!0,message:"请填写整改反馈信息",trigger:"blur"}]},auditTypeOptions:[],auditTypeValue:void 0}},computed:Object(s["a"])(Object(s["a"])({},Object(m["b"])(["channelArray"])),{},{ownerList:function(){var e=this;return this.list.filter((function(t){return e.channelArray.includes(t.access_departid)}))},resonDesc:function(){var e=this,t=["待整改","已整改","无需整改"],n=["未整改说明:","具体整改措施:","无需整改原因:"],r=t.findIndex((function(t){return t===e.currentItem.state_name}));return n[r]}}),created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listLoading=!1,e.currentMonth=e.getCurrentMonth(),t.next=4,e.getList(e.listQuery.offset,e.listQuery.limit,e.currentMonth);case 4:return t.next=6,e.inintAuditType();case 6:case"end":return t.stop()}}),t)})))()},methods:{getItem:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.dialogVisible=!0,t.currentItem=e;case 2:case"end":return n.stop()}}),n)})))()},dialogClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},submitForm:function(e){var t=this,n=this.currentItem,r=n.id,a=void 0===r?void 0:r,s=n.serial_number,c=void 0===s?void 0:s,u=n.audit_date,o=void 0===u?void 0:u,d=n.state_name,f=void 0===d?void 0:d,m=n.reject_reason,p=void 0===m?void 0:m;this.$refs[e].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,l({id:a,serialNumber:c,auditdate:o,stateName:f,rejectReason:p});case 3:t.dialogVisible=!1,location.reload(),e.next=9;break;case 7:return t.$message.error("请确认稽核反馈信息填写是否符合要求"),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getCurrentMonth:function(){var e=(new Date).getFullYear(),t=(new Date).getMonth()+1;return t<10?"".concat(e,"0").concat(t):"".concat(e).concat(t)},getList:function(e,t,n,r){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function i(){var s,c,u,l,d;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.listLoading=!0,i.next=3,o({offset:e,limit:t,auditdate:n,audittype:r});case 3:s=i.sent,c=s.result,u=void 0===c?null:c,l=s.total,d=void 0===l?void 0:l,a.listLength=d,a.list=u,a.listLoading=!1;case 11:case"end":return i.stop()}}),i)})))()},inintAuditType:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:n=t.sent,n["result"].forEach((function(t){e.auditTypeOptions.push({value:t.audit_type,lable:t.audit_type})}));case 4:case"end":return t.stop()}}),t)})))()},getPrevPage:function(e){},getNextPage:function(e){},getCurrentPage:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getList(parseInt(e-1)*parseInt(t.listQuery.limit),t.listQuery.limit,t.currentMonth);case 2:t.currentPage=parseInt(e-1);case 3:case"end":return n.stop()}}),n)})))()},sortByFineFee:function(e,t){return e.fine_fee-t.fine_fee},sortByAuditDate:function(e,t){return e.audit_date-t.audit_date},serialSearch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,s,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.inputSerial){t.next=2;break}return t.abrupt("return",!1);case 2:return e.auditTypeValue=void 0,t.next=5,o({offset:0,limit:1e5,auditdate:e.currentMonth});case 5:if(n=t.sent,r=n.result,a=void 0===r?null:r,i=n.total,s=void 0===i?void 0:i,e.listLength=s,c=a.findIndex((function(t){return t.serial_number===e.inputSerial})),-1!==c){t.next=15;break}return e.$message({message:"未查询到稽核号码信息",type:"warning"}),t.abrupt("return",!1);case 15:return u=c/e.listQuery.limit,t.next=18,e.getCurrentPage(u+1);case 18:return l=e.list.findIndex((function(t){return t.serial_number===e.inputSerial})),t.abrupt("return",e.list.splice(0,0,e.list.splice(l,1)[0]));case 20:case"end":return t.stop()}}),t)})))()},searchByMonth:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.auditTypeValue=void 0,t.next=3,e.getList(e.listQuery.offset,e.listQuery.limit,e.currentMonth);case 3:case"end":return t.stop()}}),t)})))()},searchByAuditType:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getList(e.listQuery.offset,e.listQuery.limit,e.currentMonth,e.auditTypeValue);case 2:case"end":return t.stop()}}),t)})))()},exportFile:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.auditTypeValue=void 0,t.next=3,o({offset:0,limit:1e5,auditdate:e.currentMonth});case 3:n=t.sent,r=n.result,a=void 0===r?null:r,i=a.filter((function(t){return e.channelArray.includes(t.access_departid)})),i.unshift({id:"编号",audit_type:"稽核项目",audit_date:"稽核日期",non_conformance:"差错原因",fee:"差错金额",serial_number:"服务号码",net_type_name:"网别",subjects_name:"业务名称",product_name:"产品名称",access_departname:"受理/发展渠道、发展人(政企)",access_departid:"渠道编码",access_staffid:"受理工号",access_date:"受理时间",id_desc:"归属营服",state_name:"是否整改",reject_reason:"未整改原因或整改说明",check_desc:"复核详情",fine_fee:"考核金额",audit_staffname:"稽核员姓名",remark_desc:"备注",cuc_depart_code:"集中系统编码"}),Object(f["a"])(i);case 9:case"end":return t.stop()}}),t)})))()},rowStyle:function(e){var t=e.row,n=e.rowIndex,r={};if(0===n&&t.serial_number===this.inputSerial)return r["background"]="#f0f9eb",r}}},_=p,v=(n("af16"),n("2877")),h=Object(v["a"])(_,r,a,!1,null,"0acb014c",null);t["default"]=h.exports},"8c01":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("99af"),n("a15b"),n("d81d"),n("1bf2"),n("ac1f"),n("5319"),n("bf19");var r=n("323e"),a=n.n(r);function i(e){a.a.start();var t="data:text/csv;charset=utf-8,\ufeff",n=Reflect.ownKeys(e[0]),r=n.join(",")+"\n",i=r;e.map((function(e){var t="";n.map((function(n){t+="".concat(e[n],",")})),i+=t+"\n"})),i=encodeURIComponent(i),t+=i;var s="".concat((new Date).toJSON().substr(0,10).replace(/-/g,"")).concat(parseInt(1e4*Math.random()),".csv"),c=document.createElement("a");c.setAttribute("href",t),c.setAttribute("download",s),document.body.appendChild(c),c.click(),a.a.done()}},a15b:function(e,t,n){"use strict";var r=n("23e7"),a=n("44ad"),i=n("fc6a"),s=n("a640"),c=[].join,u=a!=Object,o=s("join",",");r({target:"Array",proto:!0,forced:u||!o},{join:function(e){return c.call(i(this),void 0===e?",":e)}})},a434:function(e,t,n){"use strict";var r=n("23e7"),a=n("23cb"),i=n("a691"),s=n("50c4"),c=n("7b0b"),u=n("65f0"),o=n("8418"),l=n("1dde"),d=n("ae40"),f=l("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,_=Math.min,v=9007199254740991,h="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var n,r,l,d,f,m,b=c(this),g=s(b.length),y=a(e,g),w=arguments.length;if(0===w?n=r=0:1===w?(n=0,r=g-y):(n=w-2,r=_(p(i(t),0),g-y)),g+n-r>v)throw TypeError(h);for(l=u(b,r),d=0;d<r;d++)f=y+d,f in b&&o(l,d,b[f]);if(l.length=r,n<r){for(d=y;d<g-r;d++)f=d+r,m=d+n,f in b?b[m]=b[f]:delete b[m];for(d=g;d>g-r+n;d--)delete b[d-1]}else if(n>r)for(d=g-r;d>y;d--)f=d+r-1,m=d+n-1,f in b?b[m]=b[f]:delete b[m];for(d=0;d<n;d++)b[d+y]=arguments[d+2];return b.length=g-r+n,l}})},af16:function(e,t,n){"use strict";var r=n("c829"),a=n.n(r);a.a},bf19:function(e,t,n){"use strict";var r=n("23e7");r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,i=n("44d2"),s=n("ae40"),c="findIndex",u=!0,o=s(c);c in[]&&Array(1)[c]((function(){u=!1})),r({target:"Array",proto:!0,forced:u||!o},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),i(c)},c829:function(e,t,n){}}]);